# 動画3: フォームと一覧画面を整える

## 想定時間: 10分

## 学習目標
- Form ViewとTable/Card Viewの違いを理解する
- 入力フォームのカスタマイズ方法を学ぶ（5テーブル構成に基づく実践）
- 一覧画面のフィルタとソート設定を習得する
- 使いやすいUI/UXのベストプラクティスを理解する

---

## 0:00-0:45 オープニング（導入）

【画面指示】
- materials.htmlの冒頭部分を表示
- 「フォームと一覧画面を整える」タイトル画面

【セリフ】

皆さん、こんにちは。本日は第3回「フォームと一覧画面を整える」です。

前回の動画2では、5テーブル構成（顧客、社員、サービス、注文、注文詳細）を設計し、参照型（Ref）を使ったテーブル間の接続を設定しました。

今回は、これらのテーブルに対して、使いやすいフォームや一覧画面を作成していきます。

AppSheetは自動的にフォームや一覧画面を生成してくれますが、業務で使うためには、入力項目の順序や表示方法をカスタマイズする必要があります。

今回は、注文フォームと注文一覧を中心に、Form View、Table View、Card Viewのカスタマイズ方法を実践的に学びます。

それでは始めましょう！

---

## 0:45-1:30 Form View、Table View、Card Viewの違い（45秒）

【画面指示】
- AppSheet Editorの画面
- UXタブ→Viewsを表示
- 3つのView形式を比較表示

【セリフ】

まず、AppSheetの主要なView形式を確認しましょう。

**Form View（フォームビュー）**

Form Viewは、データの新規作成や編集に使う入力フォーム画面です。1件のレコードを編集する際に使います。

例えば、注文テーブルの新規登録フォームや、既存注文の編集フォームがこれにあたります。

**Table View（テーブルビュー）**

Table Viewは、データを表形式で一覧表示する画面です。複数件のレコードを一度に確認する際に使います。

Excelのような表形式で、列ごとにソートやフィルタをかけることができます。

**Card View（カードビュー）**

Card Viewは、データをカード形式で一覧表示する画面です。Table Viewよりも視覚的にわかりやすく、モバイルでの操作に適しています。

顧客名や見積番号など、主要な情報をカードのヘッダーに表示し、補足情報をサブヘッダーに表示することができます。

今回の研修では、注文テーブルに対して、Form View（注文フォーム）とCard View（注文一覧）をカスタマイズしていきます。

---

## 1:30-4:30 注文フォーム（Form View）のカスタマイズ（3分）

【画面指示】
- UXタブ→Views→「注文_Form」を選択
- View Columnsの編集画面を表示
- 各フィールドの設定を順番に実演

【セリフ】

それでは、注文フォームをカスタマイズしていきましょう。

**ステップ1: UXタブでForm Viewを選択**

左側のメニューから「UX」タブをクリックします。

「Views」セクションの中から「注文_Form」を選択します。これは、AppSheetが自動生成した注文テーブルの入力フォームです。

**ステップ2: View Columnsで表示項目を調整**

「View Options」の下に「View Columns」というセクションがあります。ここで、フォームに表示する項目を選択し、並び順を調整できます。

現在、すべてのカラムが表示されていますね。業務で使う場合、入力が必要な項目だけを表示し、自動生成される項目（ID注文、作成日時、最終編集日時など）は非表示にするのが一般的です。

**ステップ3: 表示項目の選択と並び順の調整**

まず、不要な項目を非表示にします。

- 「ID注文」のチェックを外します（自動生成されるため入力不要）
- 「見積番号」「請求番号」のチェックを外します（自動生成されるため入力不要）
- 「納入単価合計」「消費税」「合計金額」のチェックを外します（仮想カラムで自動計算されるため入力不要）

次に、表示項目の並び順を調整します。ドラッグ&ドロップで順序を変更できます。

推奨の並び順は以下の通りです：

1. ID顧客（参照型：顧客テーブルから選択）
2. ID社員（参照型：社員テーブルから選択）
3. ステータス（見積作成中、見積発行済、受注、納品完了などを選択）
4. 発行日
5. 有効期限
6. 納品先
7. 納品先名
8. 受注日
9. 納入期日
10. 納入場所
11. 御支払い条件
12. 備考
13. 振込期限

**ステップ4: 初期値の設定**

次に、いくつかのフィールドに初期値を設定します。

「発行日」フィールドをクリックして、「Initial Value」欄に `TODAY()` と入力します。これで、フォームを開いた時に自動的に今日の日付が入力されます。

「ステータス」フィールドをクリックして、「Initial Value」欄に `"見積作成中"` と入力します。これで、新規注文は自動的に「見積作成中」ステータスで作成されます。

「ID社員」フィールドをクリックして、「Initial Value」欄に `USEREMAIL()` と入力します。これで、ログインしている社員が自動的に選択されます。

**ステップ5: 必須項目の設定**

次に、必須項目を設定します。

「ID顧客」フィールドをクリックして、「Required?」を「Yes」に設定します。これで、顧客が選択されていない場合、保存できなくなります。

同様に、「ID社員」「ステータス」「発行日」も必須項目に設定します。

これで、注文フォームのカスタマイズが完了しました。

プレビュー画面で確認してみましょう。「+」ボタンをクリックすると、カスタマイズされた注文フォームが表示されます。

発行日には今日の日付が自動的に入力されていますね。ID顧客やID社員は、ドロップダウンで選択できるようになっています。

---

## 4:30-7:00 注文一覧（Card View）のカスタマイズ（2分30秒）

【画面指示】
- UXタブ→Views→「注文」ビューを選択
- View Optionsの編集画面を表示
- Primary Header、Secondary Header、Summary Columnの設定を実演

【セリフ】

次に、注文一覧（Card View）をカスタマイズしていきましょう。

**ステップ1: UXタブでCard Viewを選択**

UXタブの「Views」セクションから「注文」ビューを選択します。

View Typeが「card」になっていることを確認してください。もし「table」になっている場合は、「card」に変更します。

**ステップ2: Primary Headerの設定**

Card Viewでは、カードの一番上に表示される項目を「Primary Header」として設定します。

「Primary Header」のドロップダウンをクリックして、「ID顧客」を選択します。これで、カードの一番上に顧客名が表示されます。

**ステップ3: Secondary Headerの設定**

次に、カードの2行目に表示される項目を「Secondary Header」として設定します。

「Secondary Header」のドロップダウンをクリックして、「ステータス」を選択します。これで、顧客名の下にステータスが表示されます。

**ステップ4: Summary Columnの設定**

「Summary Column」は、カードの3行目以降に表示される補足情報です。複数の項目を選択できます。

「Summary Column」の「+」ボタンをクリックして、以下の項目を追加します：

- 発行日
- 見積番号
- 合計金額

これで、カードに顧客名、ステータス、発行日、見積番号、合計金額が表示されるようになります。

**ステップ5: フィルタの設定**

次に、特定のステータスだけを表示するフィルタを設定してみましょう。

「View Options」の「Filter」欄をクリックして、以下の式を入力します：

```
[ステータス] = "見積作成中"
```

これで、「見積作成中」ステータスの注文だけが表示されるようになります。

**ステップ6: ソートの設定**

最後に、表示順序を設定します。

「Sort」欄をクリックして、「発行日」を選択します。次に、「Sort Order」を「Descending（降順）」に設定します。

これで、新しい注文が一番上に表示されるようになります。

プレビュー画面で確認してみましょう。注文一覧がカード形式で表示され、顧客名、ステータス、発行日、見積番号、合計金額などが見やすく表示されていますね。

ステータス別に色分けされていて、一目で進捗状況が把握できます。

---

## 7:00-8:30 注文詳細（子テーブル）の表示設定（1分30秒）

【画面指示】
- Dataタブ→注文テーブル→Columnsを表示
- 「Related 注文詳細s」という仮想カラムが自動生成されていることを確認
- UXタブ→注文_Detailビューを選択
- View Columnsで「Related 注文詳細s」が表示されていることを確認

【セリフ】

次に、注文詳細（子テーブル）の表示設定を確認しましょう。

前回の動画2で、注文テーブルと注文詳細テーブルを親子関係で接続しました（注文詳細テーブルの「ID注文」カラムに「Is a part of = Yes」を設定）。

この設定により、AppSheetは自動的に「Related 注文詳細s」という仮想カラムを注文テーブルに追加します。

**ステップ1: 仮想カラムの確認**

Dataタブをクリックして、「注文」テーブルを選択します。

「Columns」セクションを下にスクロールすると、「Related 注文詳細s」という仮想カラムが自動生成されていますね。

このカラムには、その注文に紐づく注文詳細のリストが格納されています。

**ステップ2: Detail Viewでの表示確認**

UXタブに戻り、「注文_Detail」ビューを選択します。

「View Columns」を確認すると、「Related 注文詳細s」が表示されていることがわかります。

プレビュー画面で確認してみましょう。注文一覧から1件の注文をクリックすると、詳細画面が表示されます。

詳細画面の下の方に、「関連する注文詳細」というセクションが表示され、その注文に紐づくサービス、数量、金額が一覧表示されていますね。

これが、親子関係による自動的な関連データ表示です。

**ステップ3: 注文詳細フォームのカスタマイズ**

注文詳細フォームも確認してみましょう。UXタブから「注文詳細_Form」を選択します。

注文詳細フォームでは、以下の項目を表示します：

1. IDサービス（参照型：サービステーブルから選択）
2. 数量

「単価」と「納入金額」は自動計算されるため、入力不要です。

「数量」フィールドをクリックして、「Required?」を「Yes」に設定し、「Min Value」を「1」に設定します。これで、数量が1以上の値でなければ保存できなくなります。

「IDサービス」も必須項目に設定します。

---

## 8:30-9:30 ベストプラクティスとよくある失敗例（1分）

【画面指示】
- materials.htmlの「ベストプラクティス」セクション
- Before/Afterの比較画面

【セリフ】

それでは、フォームと一覧画面をカスタマイズする際のベストプラクティスをまとめます。

**ベストプラクティス1: 入力フォームは必要最小限のフィールドに**

自動生成される項目（ID、作成日時、フラグ類）は非表示にし、入力が必要な項目だけを表示します。これにより、ユーザーの入力負担が減り、入力ミスも防げます。

**ベストプラクティス2: 一覧画面は見やすさを重視**

Card Viewでは、Primary Headerに最も重要な情報（顧客名など）を表示し、Secondary Headerに補足情報（ステータスなど）を表示します。Summary Columnは3〜5項目に絞り、スクロールせずに内容が把握できるようにします。

**ベストプラクティス3: フィルタを活用してステータス別の画面を作成**

同じテーブルに対して、複数のビューを作成し、それぞれ異なるフィルタを設定することで、ステータス別の画面を用意できます。

例えば、「見積作成中一覧」「見積発行済一覧」「受注一覧」など、ステータスごとに画面を分けることで、業務の進捗が一目で把握できます。

**よくある失敗例**

よくある失敗例は、すべてのフィールドを表示してしまい、フォームが長くなりすぎることです。特にモバイルで使う場合、スクロールが多いと操作性が悪くなります。

必須項目と任意項目を明確に区別し、任意項目は別セクションにまとめるなど、工夫してください。

---

## 9:30-10:00 まとめと次回予告（30秒）

【画面指示】
- materials.htmlの「まとめと次回予告」セクション

【セリフ】

本日は、Form ViewとCard Viewのカスタマイズ方法を学びました。

注文フォームでは、表示項目の選択、並び順の調整、初期値の設定、必須項目の設定を行いました。

注文一覧では、Primary Header、Secondary Header、Summary Column、フィルタ、ソートの設定を行いました。

また、親子関係による関連データの自動表示も確認しました。

次回の動画4では、「テンプレートから見積書・請求書を出力する」というテーマで、Googleドキュメントのテンプレートを使って、注文データから見積書や請求書を自動生成する方法を実践します。

それでは、次回の動画でお会いしましょう！

---

## 補足資料

### 参考リンク
- [AppSheet Views Documentation](https://help.appsheet.com/en/articles/961337-views)
- [AppSheet View Types](https://help.appsheet.com/en/articles/961340-view-types)
- [AppSheet Ref Columns](https://help.appsheet.com/en/articles/961567-ref-columns)

### よくある質問

**Q: Form Viewで、参照型（Ref）カラムはどのように表示されますか？**
A: 参照型カラムは、自動的にドロップダウン形式で表示されます。参照先のテーブルのLabel列（通常は名前列）が選択肢として表示されます。

**Q: Card Viewで、複数のフィルタを組み合わせることはできますか？**
A: はい、AND条件やOR条件を使って複数のフィルタを組み合わせることができます。例：`AND([ステータス] = "見積作成中", [発行日] >= TODAY() - 30)`

**Q: 親子関係を設定したのに、関連データが表示されません。どうすれば良いですか？**
A: まず、Dataタブで「Related ○○s」という仮想カラムが自動生成されているか確認してください。次に、UXタブのDetail Viewで、その仮想カラムが表示対象に含まれているか確認してください。

**Q: フォームの項目を複数列に配置することはできますか？**
A: AppSheetのデフォルトでは1列レイアウトですが、「Column Width」設定を調整することで、一部の項目を横並びに配置することが可能です。ただし、モバイルでの表示を考慮すると、1列レイアウトが推奨されます。

### 今日のチェックリスト

- [ ] Form Viewで表示項目を選択し、並び順を調整できた
- [ ] 初期値（TODAY()など）を設定できた
- [ ] 必須項目を設定できた
- [ ] Card ViewでPrimary Header、Secondary Header、Summary Columnを設定できた
- [ ] フィルタとソートを設定できた
- [ ] 親子関係による関連データの表示を確認できた
- [ ] 次回のテーマ（テンプレートからの書類出力）を確認できた
