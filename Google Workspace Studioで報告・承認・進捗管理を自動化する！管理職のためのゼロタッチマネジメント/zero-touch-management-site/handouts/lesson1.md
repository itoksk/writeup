# 第1回：属人管理から卒業するための基礎設計！条件分岐で日報・週報提出依頼を自動化する

## 学習目標

曜日判定による条件分岐を実装し、日報・週報提出依頼の自動化エージェントを作成して、属人管理から卒業するための基礎を構築します。

---

## BEFORE / AFTER

| Before（受講前） | After（受講後） |
|---|---|
| 日報確認に毎日30分〜1時間 | 日報・週報依頼が自動送信 |
| 提出依頼を毎日手動送信 | 曜日判定で条件分岐 |
| 送り忘れが月に数回発生 | 送り忘れゼロを実現 |
| 管理業務が属人化 | 管理業務70%削減の第一歩 |

---

## エージェント作成プロンプト

以下のプロンプトをコピーして、Google Workspace Studio（https://studio.workspace.google.com/）で実行してください。

```
日報・週報提出依頼エージェントを作成してください。

【エージェント名】
日報週報提出依頼

【説明】
曜日に応じて日報/週報の提出依頼を自動送信

【スターター】
Scheduled（スケジュール）- 毎日17:00

【処理フロー】
1. Geminiステップで曜日を判定し、以下の条件で出力:
   - 月〜木: 日報提出依頼メッセージ（本日23:59期限）
   - 金曜日: 週報提出依頼メッセージ（今週のサマリーと来週の計画を含む）
   - 土日: "NO_SEND" を出力

2. 条件分岐ステップ:
   - Gemini出力が "NO_SEND" 以外の場合 → 次のステップへ
   - "NO_SEND" の場合 → 処理終了

3. Chat DMステップ:
   - 自分へ通知を送信

【出力先】
Chat DM（自分へのダイレクトメッセージ）

このエージェントを作成してください。
```

---

## エージェントフロー

```
Schedule (17:00) → 曜日判定 (Gemini) → 条件分岐 → Chat DM送信
```

| 月〜木 | 金曜日 | 土日 |
|---|---|---|
| 日報提出依頼を送信 | 週報提出依頼を送信 | 送信しない (NO_SEND) |

---

## エージェント設計

| 項目 | 設定値 |
|---|---|
| エージェント名 | 日報週報提出依頼 |
| 説明 | 曜日に応じて日報/週報の提出依頼を自動送信 |
| スターター | Scheduled（スケジュール）- 毎日17:00 |
| ステップ | Gemini → 条件分岐 → Chat DM |
| 出力先 | Chat DM（自分へのダイレクトメッセージ） ※外部送信は未対応 |

---

## 作成ステップ

1. **新規エージェント作成**: studio.workspace.google.com にアクセス → 「新規作成」をクリック → エージェント名「日報週報提出依頼」を入力

2. **スケジュールスターター設定**: スターターで「Scheduled（スケジュール）」を選択 → 頻度: 毎日 → 時刻: 17:00 を設定

3. **Geminiステップで曜日判定**: ステップを追加 → 「Gemini」を選択 → 曜日判定プロンプトを設定

4. **条件分岐ステップ設定**: ステップを追加 → 「条件分岐」を選択 → Geminiの出力が「NO_SEND」以外の場合のみ次のステップを実行

5. **Chat DMステップ設定**: Chat DM送信のステップを追加。自分への通知を受け取り、必要に応じて手動でチームへ転送

6. **テスト実行と有効化**: 「テスト」で動作確認を行い、「有効化」で本番稼働を開始

---

## 曜日判定プロンプト

```
Today is {current_date}.

Determine the day of the week and generate the appropriate message:

If Monday to Thursday:
- Generate a daily report request in Japanese
- Include deadline (today 23:59)
- Keep it brief and professional

If Friday:
- Generate a weekly report request in Japanese
- Include deadline (today 23:59)
- Ask for weekly summary and next week's plan

If Saturday or Sunday:
- Output: "NO_SEND"

Output the message only, no explanations.
```

---

## メッセージテンプレート

### 日報提出依頼（月〜木）

```
件名：【提出依頼】本日の日報

チームの皆さん

お疲れ様です。
本日の日報提出をお願いいたします。

■ 提出期限
本日 23:59まで

■ 記載項目
・本日の業務内容
・進捗状況
・課題・相談事項
・明日の予定

よろしくお願いいたします。
```

### 週報提出依頼（金曜日）

```
件名：【提出依頼】今週の週報

チームの皆さん

お疲れ様です。
今週の週報提出をお願いいたします。

■ 提出期限
本日 23:59まで

■ 記載項目
・今週の業務サマリー
・達成した成果
・課題・懸念事項
・来週の計画
・共有事項

よろしくお願いいたします。
```

---

## 条件分岐ステップ設定

```
IF Gemini出力 != "NO_SEND":
    → Chat DM送信ステップ実行（自分へ）
    → 必要に応じて手動でチームへ転送
ELSE:
    → 何もしない (土日・祝日は自動スキップ)
```

---

## テスト確認ポイント

- [ ] 曜日判定が正しく行われているか（月〜木、金、土日の判別）
- [ ] メッセージの内容が適切か（日報/週報の切り替えが正しい）
- [ ] 送信先（Chat DM）が正しく設定されているか
- [ ] 土日は送信されないか（NO_SEND判定が機能しているか）

---

## 今日のポイント

- Google Workspace Studioで「スケジュールスターター」を設定して定時実行を実現
- Geminiステップで曜日を判定し、条件分岐ロジックを実装
- Chat DMステップで自分へ提出依頼を自動送信（外部送信は未対応）
- 金曜日のみ週報依頼を追加する条件分岐を実装
- 土日・祝日はNO_SENDで自動スキップし、休日の誤送信を防止
- 属人管理から脱却し、ゼロタッチマネジメントの基礎を構築

---

## 注意事項

Chat通知は自分へのDM（ダイレクトメッセージ）のみ送信可能です。スペースへの投稿機能・外部への送信機能は正式リリースで削除されました。チーム全体への通知が必要な場合は、自分へのDMを受け取った後、手動で転送してください。
