# 動画5：デモプロンプト集
## ChatGPTがうまく働かない：指示ミスを防ぐ5つの型

### 1. 曖昧な指示の改善例

**❌ 悪い例（曖昧な指示）:**
```
売上データを分析してください。
```

**⭕ 良い例（明確な指示）:**
```
【分析対象】2024年1月〜12月の月次売上データ
【分析目的】来年度予算策定のための売上傾向把握
【期待する分析内容】
1. 月別売上推移とトレンド分析
2. 前年同期比の成長率計算
3. 季節性の有無と影響度評価
4. 売上変動の要因特定

【出力形式】
- グラフ：月別推移の折れ線グラフ
- 表：月別数値と前年比較表
- 解釈：ビジネス判断に直結する洞察3点

【技術制約】
- Python・pandas使用
- 日本語フォント対応
- PNG形式で保存
```

### 2. データ構造を明示しない失敗例

**❌ 悪い例（構造不明）:**
```
CSVファイルの売上データを読み込んで、グラフを作成してください。
```

**⭕ 良い例（構造明示）:**
```
【データ構造】
ファイル名：sales_2024.csv
エンコード：UTF-8
区切り文字：カンマ

列構成：
- 日付（YYYY-MM-DD形式）
- 商品名（文字列、50文字以内）
- 売上金額（整数、単位：円）
- 数量（整数）
- 地域（東京/大阪/名古屋/福岡の4区分）

【サンプルデータ】
日付,商品名,売上金額,数量,地域
2024-01-01,ノートPC,120000,1,東京
2024-01-02,スマートフォン,80000,1,大阪

【処理要件】
- 欠損値は0で補完
- 異常値（売上金額100万円超）は除外
- 日付でソートして処理
```

### 3. 出力形式を指定しない失敗例

**❌ 悪い例（出力形式不明）:**
```
売上データの分析結果をグラフで表示してください。
```

**⭕ 良い例（詳細出力指定）:**
```
【グラフ仕様】
- 種類：折れ線グラフ
- サイズ：12インチ×8インチ
- タイトル：「2024年月別売上推移」（中央上部、16pt、太字）
- X軸：月（1月〜12月表示）
- Y軸：売上金額（万円単位、3桁区切り）
- 線の色：青色（#003366）
- マーカー：円形、サイズ6
- グリッド：表示（薄いグレー、透明度30%）

【保存設定】
- ファイル形式：PNG
- 解像度：300DPI
- ファイル名：monthly_sales_2024.png
- 保存先：./output/フォルダ

【追加要件】
- 日本語フォント使用（文字化け対策）
- 各点に数値ラベル表示
- 前年同月の点線での重ね表示
```

### 4. 段階的処理をしない失敗例

**❌ 悪い例（一括処理）:**
```
売上CSVファイルを読み込んで分析し、グラフを作成して、レポートを生成してください。
```

**⭕ 良い例（段階的処理）:**
```
【ステップ1：データ読み込み・検証】
1. CSVファイルの存在確認
2. ファイル読み込み（エンコード：UTF-8）
3. データ構造の確認表示
   - 行数・列数
   - 各列のデータ型
   - 先頭5行のサンプル表示
   - 基本統計量（平均、最大、最小）
4. データ品質チェック
   - 欠損値の個数と割合
   - 重複データの検出
   - 異常値の特定

⚠️ この段階の結果を確認してから次に進む

【ステップ2：データ前処理】
1. 欠損値の処理（補完方法の選択）
2. 異常値の処理（除外・修正の判断）
3. 日付データの型変換
4. カテゴリデータの正規化
5. 処理後のデータ品質確認

⚠️ 前処理結果の妥当性を確認してから次に進む

【ステップ3：基本分析】
（以下、各ステップで確認ポイントを明示）
```

### 5. 制約条件を伝えない失敗例

**❌ 悪い例（制約なし）:**
```
売上データをPythonで分析してグラフを作成してください。
```

**⭕ 良い例（制約明示）:**
```
【実行環境】
- Python 3.9以上
- メモリ制限：8GB以下で処理
- 実行時間：5分以内で完了
- CPUコア数：4コアまで使用可

【使用可能ライブラリ】
- pandas（必須）
- matplotlib（必須）
- numpy（推奨）
- seaborn（使用不可・ライセンス制限あり）

【データ制約】
- ファイルサイズ：最大50MB
- データ行数：最大10万行まで
- メモリ使用量：処理中6GB以下

【出力制約】
- 画像ファイル：最大10MB
- 保存先：./results/フォルダのみ
- ファイル名：20文字以内、英数字のみ

【品質要件】
- エラー時は詳細メッセージ表示
- 処理進捗を10%刻みで表示
- 全ての数値は小数点第2位まで
```

### 6. エラー対処法を含まない失敗例

**❌ 悪い例（エラー対処なし）:**
```
売上CSVファイルを読み込んでグラフを作成してください。
```

**⭕ 良い例（エラー対処含む）:**
```
【エラーハンドリング要件】

1. ファイル関連エラー
   - ファイルが存在しない場合
     → エラーメッセージ表示 + サンプルファイル作成
   - ファイル権限がない場合
     → 権限確認手順を案内
   - ファイル形式が不正な場合
     → 期待する形式の例を表示

2. データ関連エラー
   - 文字コードエラー
     → UTF-8, Shift-JIS, CP932で再試行
   - 列名不一致
     → 期待する列名を表示 + 自動マッピング提案
   - データ型エラー
     → 型変換処理 + 変換できない値のリスト表示

3. メモリ・処理エラー
   - メモリ不足
     → データ分割処理 + チャンクサイズの最適化
   - 処理時間超過
     → 部分処理 + 進捗保存機能

【エラー対処コード例】
```python
try:
    df = pd.read_csv(filename, encoding='utf-8')
except UnicodeDecodeError:
    try:
        df = pd.read_csv(filename, encoding='shift-jis')
    except Exception as e:
        print(f"文字コードエラー: {e}")
        # 対処法を提示
```
```

### 7. 実用的な完璧プロンプトのテンプレート

```
【タスク概要】
目的：○○のために○○を分析したい
期限：○○まで
重要度：高/中/低

【データ詳細】
ソース：○○.csv（○○から提供）
形式：UTF-8、カンマ区切り、ヘッダーあり
サイズ：約○○行、○○MB
構造：
- 列1：○○（データ型、制約条件）
- 列2：○○（データ型、制約条件）
品質：欠損値○○%、異常値の可能性○○

【技術制約】
環境：Python 3.9、Jupyter Notebook
ライブラリ：pandas, matplotlib必須、○○禁止
リソース：メモリ○○GB以下、実行時間○○分以内
出力先：○○フォルダ、権限○○

【処理手順】
ステップ1：データ読み込み・検証
- 確認項目：○○、○○、○○
- 次進行条件：○○が満たされること

ステップ2：データ前処理
- 処理内容：○○、○○、○○
- 品質基準：○○以上であること

ステップ3：分析実行
- 分析手法：○○を使用
- 評価指標：○○で測定

【出力仕様】
形式：○○グラフ + ○○テーブル + ○○レポート
詳細：
- グラフ：種類○○、サイズ○○、色○○
- テーブル：○○項目、○○ソート
- レポート：○○構成、○○形式

【品質要件】
精度：○○以上
実行：○○環境で○○回テスト済み
エラー：全パターン対処済み
保守：○○によるメンテナンス可能

【確認ポイント】
- ステップ○で○○を確認
- 異常時は○○で停止
- 最終確認は○○で実施

【成果物】
1. ○○.png（グラフファイル）
2. ○○.csv（処理結果データ）
3. ○○.txt（分析レポート）
4. ○○.py（実行コード、再現可能）
```

### 8. ChatGPT指示の品質チェックリスト

```
【明確性チェック】
□ 目的と期待する結果が具体的に記述されている
□ 曖昧な表現（「適切に」「うまく」等）を使用していない
□ 専門用語の定義が明確になっている
□ 優先順位が明示されている

【完全性チェック】
□ 必要なデータ情報が全て含まれている
□ 技術的制約条件が明記されている
□ 出力形式が詳細に指定されている
□ エラーハンドリングが考慮されている

【実行可能性チェック】
□ 技術的に実現可能な内容である
□ 制約条件下で実行可能である
□ 必要なリソースが確保可能である
□ 段階的実行が可能な構造になっている

【検証可能性チェック】
□ 結果の妥当性を判断する基準がある
□ 成功・失敗の判定条件が明確である
□ 改善のためのフィードバックが可能である
□ 再現性が確保されている

【使用前チェック】
このプロンプトで期待した結果が得られますか？
□ はい → 実行
□ いいえ → 上記チェックリストで見直し
```

### 9. トラブルシューティング実践例

**状況：「グラフが表示されない」**

**❌ 悪い質問:**
```
グラフが表示されません。直してください。
```

**⭕ 良い質問:**
```
【問題状況】
実行環境：Python 3.9, Jupyter Notebook
使用ライブラリ：matplotlib 3.5.2, pandas 1.4.3
データ：sales.csv（500行、問題なく読み込み完了）

【実行したコード】
（エラー発生したコード全文を添付）

【エラーメッセージ】
（完全なエラーメッセージを添付）

【期待していた結果】
月別売上推移の折れ線グラフ表示

【試した対処法】
1. plt.show()の実行 → 変化なし
2. backend確認 → 'Qt5Agg'
3. 再起動 → 改善せず

【環境情報】
OS：Windows 11
Python：Anaconda環境
画面：ディスプレイ2台構成

具体的な修正方法を教えてください。
```

### 10. 継続改善のためのフィードバック循環

```
【プロンプト改善サイクル】

1. 実行前確認
   - チェックリストでの事前確認
   - 期待結果の明文化
   - 制約条件の整理

2. 実行・結果評価
   - 期待結果との比較
   - エラー・問題点の記録
   - 実行時間・品質の測定

3. フィードバック収集
   - 不足していた情報の特定
   - 曖昧だった指示の洗い出し
   - 追加で必要だった制約の確認

4. プロンプト改善
   - 具体性の向上
   - 制約条件の追加
   - エラーハンドリングの強化
   - テンプレート化

5. 次回実行準備
   - 改善版プロンプトの作成
   - ドキュメント化
   - チームでの知識共有

【改善記録テンプレート】
日付：yyyy-mm-dd
タスク：○○分析
問題：○○が不明確で期待した結果が得られず
改善：○○を具体的に指定することで解決
学習：今後○○類似のタスクでは○○を明記する
```