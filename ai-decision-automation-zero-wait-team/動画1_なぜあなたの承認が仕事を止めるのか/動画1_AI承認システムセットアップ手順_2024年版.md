# 🚀 AI承認システム 10分セットアップ手順（2024年最新版）

## ⚠️ Makeインターフェース更新対応版

2024年のMake.comのインターフェース変更に対応した最新手順です。

---

## 📋 必要なもの
- **Slackワークスペース**（無料版でOK、管理者権限必要）
- **クレジットカード**（OpenAI APIキー購入用）
- **10分の時間**

---

## Step 1: OpenAI APIキー取得（2分）

### 1.1 OpenAIアカウント作成
```
1. https://platform.openai.com にアクセス
2. 「Sign up」または「Log in」
3. アカウントがない場合は新規作成（Googleアカウントで簡単登録）
```

### 1.2 APIキー作成
```
1. ログイン後、右上のアカウントアイコンをクリック
2. 「View API keys」または「API keys」を選択
3. 「+ Create new secret key」をクリック
4. Name: 「AI承認Bot」と入力
5. 「Create secret key」をクリック
6. 表示されたキー（sk-xxxxx）をコピー
```

⚠️ **重要**: このキーは二度と表示されません！必ずメモ帳などに保存してください。

### 1.3 クレジット追加（初回のみ）
```
1. 左メニュー「Billing」→「Add payment details」
2. クレジットカード情報を入力
3. $5-10程度のクレジットを追加
```

---

## Step 2: Slack Bot作成（3分）

### 2.1 Slack App作成
```
1. https://api.slack.com/apps にアクセス
2. 「Create New App」をクリック
3. 「From scratch」を選択
4. 設定:
   - App Name: AI承認Bot
   - Pick a workspace: あなたのワークスペース
5. 「Create App」をクリック
```

### 2.2 Bot権限の設定
```
1. 左メニュー「OAuth & Permissions」をクリック
2. 「Scopes」セクションまでスクロール
3. 「Bot Token Scopes」の「Add an OAuth Scope」をクリック
4. 以下の4つを順番に追加:
   - channels:history（メッセージ読み取り）
   - channels:read（チャンネル情報取得）
   - chat:write（メッセージ投稿）
   - chat:write.customize（カスタム投稿）
```

### 2.3 アプリのインストール
```
1. ページ上部の「Install to Workspace」をクリック
2. 権限確認画面で「許可する」をクリック
3. Bot User OAuth Tokenが表示される
4. xoxb-で始まるトークンをコピーして保存
```

### 2.4 Slackチャンネルの準備
```
1. Slackアプリを開く
2. 新規チャンネル作成: #approval-requests
3. チャンネルに入る
4. メッセージ欄に「/invite @AI承認Bot」と入力
5. Enterキーで送信してBotを招待
```

---

## Step 3: Make設定（5分）

### 3.1 Makeアカウント作成
```
1. https://www.make.com にアクセス
2. 「Get started free」をクリック
3. メールアドレスで登録（Googleアカウントも可）
4. メール認証を完了
```

### 3.2 新規シナリオ作成
```
1. ダッシュボードで「Create a new scenario」
2. シナリオ名: 「AI承認システム」
```

### 3.3 モジュール1: Slack監視の設定

#### 3.3.1 モジュール追加
```
1. 画面中央の大きな「+」をクリック
2. 検索窓に「Slack」と入力
3. Slackアイコンをクリック
4. 以下のいずれかを選択:
   - 「Watch Public Channel Messages」
   - 「Watch messages」
   - 「New message」
```

#### 3.3.2 Slack接続（2024年版）
```
1. Connectionフィールドの「Add」または「Create a connection」をクリック
2. 接続方法の選択画面で以下を探す:
   【パターンA】
   - 「Show advanced settings」をクリック
   【パターンB】
   - 「Manual setup」を選択
   【パターンC】
   - 小さい文字で「or enter manually」をクリック
   
3. 手動設定画面で入力:
   - Connection name: AI承認Bot
   - Bot User OAuth Token: xoxb-xxxxx（先ほどコピーしたもの）
   
4. 「Save」をクリック
5. 接続成功のメッセージを確認
```

#### 3.3.3 チャンネル設定
```
1. Channel: ドロップダウンから「#approval-requests」を選択
   （表示されない場合は、接続し直すか、チャンネルIDを直接入力）
2. 「OK」をクリック
```

### 3.4 モジュール2: ChatGPT判断の設定

#### 3.4.1 モジュール追加（2024年版）
```
1. Slackモジュールの右側の「+」をクリック
2. 検索窓で以下を順番に試す:
   - 「OpenAI」
   - 「ChatGPT」  
   - 「GPT」
3. 見つかったら、以下のいずれかを選択:
   - 「Create a Chat Completion」（推奨）
   - 「Create a Completion」
   - 「OpenAI - ChatGPT」
   - 「Send Message」
   ※緑色のOpenAIロゴのものを選択
```

#### 3.4.2 OpenAI接続（2024年版）
```
1. Connection欄の「Add」または「Create a connection」をクリック
2. 入力項目:
   - Connection name: OpenAI API
   - API Key: sk-xxxxx（Step1でコピーしたもの）
   - Organization ID:（空欄でOK）
3. 「Save」をクリック
4. 接続成功を確認
```

#### 3.4.3 プロンプト設定（2024年版）
```
1. Model: 以下から選択
   - gpt-3.5-turbo（推奨：高速・低コスト）
   - gpt-4（高精度・高コスト）
   - gpt-4-turbo（バランス型）

2. Messages設定:
   【1つ目のメッセージ】
   - 「Add item」または「+」をクリック
   - Role: System
   - Message Content / Content:
```
```
あなたは経験豊富な管理職として、承認業務を担当します。
判断基準：
- 30万円以下かつROI 200%以上 → 承認
- それ以外 → 詳細検討が必要

必ず以下の形式で簡潔に回答：
【判断】承認 または 却下
【理由】50文字以内で説明
```
```
   【2つ目のメッセージ】
   - 「Add item」をクリック
   - Role: User
   - Message Content / Content: {{1.text}}
     （1.textをクリックして選択）

3. その他の設定（オプション）:
   - Temperature: 0.3（一貫性重視）
   - Max Tokens: 150

4. 「OK」をクリック
```

### 3.5 モジュール3: Slack返信の設定

#### 3.5.1 モジュール追加
```
1. OpenAIモジュールの右側の「+」をクリック
2. 「Slack」を選択
3. 「Create a Message」または「Send a message」を選択
```

#### 3.5.2 返信設定
```
1. Connection: 既存の「AI承認Bot」を選択
2. Channel ID: {{1.channel}}（Slackモジュールから）
3. Text / Message:
```
```
🤖 AI承認システムからの判断結果

{{2.choices[1].message.content}}

処理時間: 3秒
承認コード: AP-{{formatDate(now, "YYYY-MMdd-HHmmss")}}
```
```
4. Advanced settingsを開く（ある場合）
5. Thread TS: {{1.ts}}（スレッド返信にする）
6. 「OK」をクリック
```

### 3.6 保存と有効化
```
1. 右上の保存ボタン（💾）をクリック
2. 左下のSchedulingスイッチをONに
3. Schedule setting: 
   - 「Immediately」または
   - 「Every 15 minutes」を選択
```

---

## 🧪 動作テスト

### テスト実行
```
1. Makeで「Run once」ボタンをクリック
2. 「Listening for new data...」と表示されるのを確認
3. Slackの#approval-requestsチャンネルで以下を投稿:
```
```
【承認依頼】新規顧客向けキャンペーン費用30万円
想定効果：10社成約（売上300万円見込み）
過去実績：類似施策でROI 280%達成
```
```
4. 3-5秒待つ
5. スレッドに返信が来れば成功！
```

---

## 🔧 トラブルシューティング

### よくある問題（2024年版）

| 問題 | 原因 | 解決法 |
|------|------|--------|
| Slack接続で「Enter manually」が見つからない | UIの変更 | 「Show advanced settings」や「Other options」を探す |
| OpenAIモジュールが見つからない | 名称変更 | 「ChatGPT」「GPT」で検索 |
| チャンネルが選択できない | Bot未招待 | Slackで再度 `/invite @AI承認Bot` |
| Invalid API key | コピーミス | 前後の空白を削除、sk-で始まることを確認 |
| 返信が来ない | 設定ミス | 各モジュールが緑の線で繋がっているか確認 |

### それでも解決しない場合

1. **Make画面の言語を英語に変更**
   - プロフィール → Settings → Language → English

2. **代替方法: HTTPモジュールを使用**
   - より技術的ですが、確実に動作します
   - 詳細は「動画5」で解説予定

3. **サポートリソース**
   - Make Community: community.make.com
   - Make Documentation: make.com/en/help

---

## 💡 成功のポイント

1. **焦らない**: 新しいUIでも基本的な流れは同じ
2. **保存をこまめに**: 各モジュール設定後に保存
3. **テストは必須**: 本番前に必ずテスト実行

---

**10分後にはAI承認システムが動いています！** 🎉

何か不明な点があれば、画面のスクリーンショットと一緒に質問してください。